# .github/workflows/combine-xcframework.yml
name: Combine XCFramework

on:
  repository_dispatch:
    types: [combine-xcframework]

jobs:
  combine:
    runs-on: macos-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Wait for both artifacts
        run: |
          echo "Checking for both device and simulator artifacts..."
          attempts=0
          max_attempts=20
          while true; do
            device=$(gh run list --workflow="Build OpenJDK iOS Device" --limit 5 --json artifacts | jq '.[] | .artifacts | map(.name) | index("libjvm-device")')
            simulator=$(gh run list --workflow="Build OpenJDK iOS Simulator" --limit 5 --json artifacts | jq '.[] | .artifacts |

